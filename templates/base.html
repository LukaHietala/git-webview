<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Git Webview{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/default.min.css">
    <script src="/static/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>
<body>
    {% if repo_name %}
    <h1>{{ repo_name }}</h1>
    <nav>
        <a href="/{{ repo_name }}/readme{% if ref and ref != 'HEAD' %}?ref={{ ref }}{% endif %}">README</a> |
        <a href="/{{ repo_name }}/commits{% if ref and ref != 'HEAD' %}?ref={{ ref }}{% endif %}">Commits</a> |
        <a href="/{{ repo_name }}/refs{% if ref and ref != 'HEAD' %}?ref={{ ref }}{% endif %}">Refs</a> |
        <a href="/{{ repo_name }}/tree{% if ref and ref != 'HEAD' %}?ref={{ ref }}{% endif %}">Tree</a> |
        <a href="/{{ repo_name }}/search{% if ref and ref != 'HEAD' %}?ref={{ ref }}{% endif %}">Search</a> |
        <a href="/">Back</a> 
    </nav>
    
    {% if branches or tags %}
    <div style="margin: 10px;">
        <form method="GET" style="display: inline;">
            <label>Branch/Tag:</label>
            <select name="ref" onchange="this.form.submit()">
                <option value="HEAD" {% if not request.args.get('ref') or request.args.get('ref') == 'HEAD' %}selected{% endif %}>HEAD</option>
                {% if branches %}
                <optgroup label="Branches">
                    {% for branch in branches %}
                    <option value="{{ branch.name }}" {% if request.args.get('ref') == branch.name %}selected{% endif %}>{{ branch.name }}</option>
                    {% endfor %}
                </optgroup>
                {% endif %}
                {% if tags %}
                <optgroup label="Tags">
                    {% for tag in tags %}
                    <option value="{{ tag.name }}" {% if request.args.get('ref') == tag.name %}selected{% endif %}>{{ tag.name }}</option>
                    {% endfor %}
                </optgroup>
                {% endif %}
            </select>
        </form>
    </div>
    {% endif %}
    
    <hr>
    {% endif %}
    
    {% block content %}{% endblock %}
</body>
</html>
