{% extends "base.html" %}

{% block title %}{{ blob.name }} - {{ repo_name }}{% endblock %}

{% block content %}

{% if blob %}
<div>
    <a href="/{{ repo_name }}/tree?ref={{ ref }}">root</a>
    {% for part in path_parts %}
        / <a href="/{{ repo_name }}/tree/{{ part.path }}?ref={{ ref }}">{{ part.name }}</a>
    {% endfor %}
    / {{ blob.name }}
</div>

<h2>{{ blob.name }}</h2>

<div>
    <p>
        <strong>Size:</strong> {{ blob.size }} bytes<br>
        <strong>Hash:</strong> {{ blob.hexsha }}
    </p>
</div>

{% if blob.is_binary %}
<div>
    <p>Binary file ({{ blob.size }} bytes)</p>
</div>
{% else %}
<div class="blob-container">
    <!--table workaround for line numbers, maybe just pre in the future-->
    <table class="blob-table">
        <tbody>
            {% for line in blob.content.splitlines() %}
            <tr>
                <td class="blob-line-num">{{ loop.index }}</td>
                <td class="blob-code"><pre>{{ line }}</pre></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% else %}
<p>Blob not found</p>
{% endif %}

{% endblock %}
